(function cloudEdit(){var use={Autoprefixer:false,Less:false,Sass:false,Modernizr:false,Normalize:false,Bootstrap:false,Foundation:false,liveEdit:false};window.addEventListener("load",function(e){window.applicationCache.addEventListener("updateready",function(e){if(window.applicationCache.status==window.applicationCache.UPDATEREADY){if(confirm("A new version of this site is available. Load it?")){window.location.reload()}}else{}},false)},false);(function initAce(){var aceTheme;if(localStorage.getItem("theme")){aceTheme=localStorage.getItem("theme")}else{aceTheme="ace/theme/chrome"}window.htmlField=ace.edit("html");htmlField.setOptions({useWorker:false,theme:aceTheme,displayIndentGuides:true,mode:"ace/mode/html",tabSize:2,useSoftTabs:true,showPrintMargin:false,enableEmmet:true});window.cssField=ace.edit("css");cssField.setOptions({theme:aceTheme,displayIndentGuides:true,mode:"ace/mode/css",tabSize:2,useSoftTabs:true,showPrintMargin:false,enableEmmet:true});window.jsField=ace.edit("js");jsField.setOptions({theme:aceTheme,displayIndentGuides:true,mode:"ace/mode/javascript",tabSize:2,useSoftTabs:true,showPrintMargin:false});(function sessionStorageGet(){if(sessionStorage.getItem("html")){htmlField.setValue(sessionStorage.getItem("html"));htmlField.clearSelection()}else{htmlField.setValue("<!-- Do not place html/head/body tags here.\nInsert the tags as would normally be used in your\nbody element. <script> tags ARE allowed, though\nthey're best placed at the end of your HTML -->\n");htmlField.clearSelection();$(".html").one("touchstart click",function(){htmlField.setValue("")})}if(sessionStorage.getItem("css")){cssField.setValue(sessionStorage.getItem("css"));cssField.clearSelection()}if(sessionStorage.getItem("js")){jsField.setValue(sessionStorage.getItem("js"));jsField.clearSelection()}if(sessionStorage.getItem("use")){use=JSON.parse(sessionStorage.getItem("use"))}if(sessionStorage.getItem("cssMode")){cssField.getSession().setMode(sessionStorage.getItem("cssMode"))}})()})();(function initConsole(){var header="Ctrl+C: abort command, Ctrl+A: start of Line, Ctrl+E: end of line.\n";window.jqconsole=$("#console").jqconsole(header);jqconsole.SetIndentWidth(2);jqconsole.RegisterShortcut("C",function(){jqconsole.AbortPrompt();handler()});jqconsole.RegisterShortcut("A",function(){jqconsole.MoveToStart();handler()});jqconsole.RegisterShortcut("E",function(){jqconsole.MoveToEnd();handler()});jqconsole.RegisterMatching("{","}","brace");jqconsole.RegisterMatching("(",")","paran");jqconsole.RegisterMatching("[","]","bracket");window.log=function(message){var data="";if(typeof message=="object"){data=JSON&&JSON.stringify?JSON.stringify(message):String(message)}else{data=message}jqconsole.Write("==> "+data+"\n")};var handler=function(command){if(command){if(command.search("console.log"!==-1)){command=command.replace("console.log","log")}try{jqconsole.Write("==> "+window.eval(command)+"\n")}catch(e){jqconsole.Write("ReferenceError: "+e.message+"\n")}}jqconsole.Prompt(true,handler,function(command){try{new Function(command)}catch(e){if(/[\[\{\(]$/.test(command)){return 1}else{return 0}}return false})};handler()})();$(".togglePane").on("click",function(){panes.close(this)});$("#consoleToggle").on("click",function(){$(this).toggleClass("btn-active");$(".console").toggle()});$("#previewToggle, #iframeClose").on("click",function(){$("#previewToggle").toggleClass("btn-active");$("html").toggleClass("modal-open")});var panes={count:function(){var count=3;var items=$(".windowGroup .column-33");items.each(function(el){if($(items[el]).css("display")==="none"){count-=1}});return count},resize:function(){var count=this.count();var win=$(".windowGroup .column-33");if(count===3||count===0){win.css("width","33%")}else{if(count===2){win.css("width","49.5%")}else{if(count===1){win.css("width","99%")}}}},close:function(el){var name=el.dataset.editor;var count=this.count();if(count>1||$(el).hasClass("btn-active")){$(el).toggleClass("btn-active");$(".window."+name).parent().toggle();this.resize()}else{alert("You Must Have at least one Editor open")}}};function buildOutput(consoleJS){var content={html:htmlField.getValue(),style:cssField.getValue(),js:jsField.getValue()};if(use.Autoprefixer&&typeof autoprefixer==="undefined"){(function loadAutoprefixer(){var xmlHttp=null;xmlHttp=new XMLHttpRequest();xmlHttp.open("GET","http://rawgit.com/ai/autoprefixer-rails/master/vendor/autoprefixer.js",false);xmlHttp.send(null);var ap=document.createElement("script");ap.type="text/javascript";ap.text=xmlHttp.responseText;document.getElementsByTagName("head")[0].appendChild(ap)})()}if(use.Sass&&typeof Sass==="undefined"){(function loadSass(){var xmlHttp=null;xmlHttp=new XMLHttpRequest();xmlHttp.open("GET","http://rawgit.com/medialize/sass.js/master/dist/sass.min.js",false);xmlHttp.send(null);var sass=document.createElement("script");sass.id="sass";sass.type="text/javascript";sass.text=xmlHttp.responseText;document.getElementsByTagName("head")[0].appendChild(sass)})()}var html="";html+="<!DOCTYPE html>\n";html+='<html lang="en">\n';html+="<head>\n";html+='<meta charset="UTF-8">\n';if(use.Normalize){html+='<link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/3.0.1/normalize.min.css" rel="stylesheet">\n'}if(use.Bootstrap){html+='<link href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.1.1/css/bootstrap.min.css" rel="stylesheet">\n'}if(use.Foundation){html+='<link href="https://cdnjs.cloudflare.com/ajax/libs/foundation/5.2.2/css/foundation.min.css" rel="stylesheet">\n'}if(use.Less){html+='<style type="text/less">\n'}else{html+='<style type="text/css">\n'}if(use.Autoprefixer){html+=autoprefixer({cascade:true}).process(content.style).css}else{if(use.Sass){html+=Sass.compile(content.style)}else{html+=content.style}}html+="\n</style>\n";html+='<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"><\/script>\n';if(use.Bootstrap){html+='<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.1.1/js/bootstrap.min.js"><\/script>\n'}if(use.Foundation){html+='<script src="https://cdnjs.cloudflare.com/ajax/libs/foundation/5.2.2/js/foundation/foundation.min.js"><\/script>\n'}if(use.Modernizr){html+='<script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.7.1/modernizr.min.js"><\/script>\n'}if(use.Less){html+='<script>\nless={env: "production", errorReporting: null}\n<\/script>\n';html+='<script src="https://cdnjs.cloudflare.com/ajax/libs/less.js/1.7.0/less.min.js"><\/script>\n'}html+="</head>\n";html+="<body>\n";html+=content.html;if(consoleJS){html+='\n<script src="js/console.min.js"><\/script>\n'}html+="\n<script>\n";html+=content.js;html+="\n<\/script>\n";html+="</body>\n";html+="</html>";return html}$("#liveEdit").on("click",function(){use.liveEdit?use.liveEdit=false:use.liveEdit=true;$(this).toggleClass("btn-active")});htmlField.getSession().on("change",function(e){if(use.liveEdit){preview(1000)}});cssField.getSession().on("change",function(e){if(use.liveEdit){preview(2000)}});$("#run").on("click",function(){preview()});function preview(delay){delay=delay||0;var timer=null;if(timer){window.clearTimeout(timer)}timer=window.setTimeout(function(){timer=null;var textToWrite=buildOutput(true);(document.getElementById("iframe").contentWindow.document).write(textToWrite);(document.getElementById("iframe").contentWindow.document).close()},delay)}$("#download").on("click",function(){function destroyClickedElement(event){document.body.removeChild(event.target)}var $download=document.createElement("a");var textToWrite=buildOutput(false);var textFileAsBlob=new Blob([textToWrite],{type:"text/plain"});var fileNameToSaveAs="index.html";$download.download=fileNameToSaveAs;if(typeof window.webkitURL==="function"){$download.href=window.webkitURL.createObjectURL(textFileAsBlob)}else{$download.href=window.URL.createObjectURL(textFileAsBlob)}$download.onclick=destroyClickedElement;$download.style.display="none";document.body.appendChild($download);$download.click()});$("#clear").on("click",function(){htmlField.setValue("");cssField.setValue("");jsField.setValue("");sessionStorage.clear();(document.getElementById("iframe").contentWindow.document).write("");(document.getElementById("iframe").contentWindow.document).close()});$("#save").on("click",function(){var store={html:htmlField.getValue(),css:cssField.getValue(),js:jsField.getValue()};localStorage.setItem("cloudEdit",JSON.stringify(store))});$("#load").on("click",function(){var store;if(localStorage.cloudEdit){store=JSON.parse(localStorage.cloudEdit);cssField.setValue(store.css);cssField.clearSelection();htmlField.setValue(store.html);htmlField.clearSelection();jsField.setValue(store.js);jsField.clearSelection()}else{alert("No previous session found...")}});(function contextMenu(){$.contextMenu({selector:".windowGroup",items:{css:{name:"CSS Options",items:{plaincss:{name:"Plain CSS [Default]",type:"radio",radio:"css",value:"plaincss",selected:true},autoprefixer:{name:"Autoprefixer",type:"radio",radio:"css",value:"autoprefixer",selected:false},less:{name:"Less CSS",type:"radio",radio:"css",value:"less",selected:false},sass:{name:"Sass CSS [Experimental]",type:"radio",radio:"css",value:"sass",selected:false},normalize:{name:"Normalize CSS",type:"checkbox",selected:false},modernizr:{name:"Modernizr",type:"checkbox",selected:false}}},framework:{name:"Frameworks",items:{none:{name:"None [Default]",type:"radio",radio:"framework",value:"none",selected:true},bootstrap:{name:"Bootstrap",type:"radio",radio:"framework",value:"bootstrap",selected:false},foundation:{name:"Foundation",type:"radio",radio:"framework",value:"foundation",selected:false}}},themes:{name:"Editor Themes",items:{light:{name:"Light",items:{chrome:{name:"Chrome [Default]",callback:function(){updateTheme("chrome")}},dreamweaver:{name:"Dreamweaver",callback:function(){updateTheme("dreamweaver")}},dawn:{name:"Dawn",callback:function(){updateTheme("dawn")}},tomorrow:{name:"Tomorow",callback:function(){updateTheme("tomorrow")}},xcode:{name:"XCode",callback:function(){updateTheme("xcode")}},kuroir:{name:"Kuroir",callback:function(){updateTheme("kuroir")}},katzenmilch:{name:"KatzenMilch",callback:function(){updateTheme("katzenmilch")}}}},dark:{name:"Dark",items:{ambiance:{name:"Ambiance",callback:function(){updateTheme("ambiance")}},cloudsmidnight:{name:"Clouds Midight",callback:function(){updateTheme("clouds_midnight")}},idlefingers:{name:"Idle Fingers",callback:function(){updateTheme("idle_fingers")}},merbivore:{name:"Merbivore",callback:function(){updateTheme("merbivore")}},merbivoresoft:{name:"Merbivore Soft",callback:function(){updateTheme("merbivore_soft")}},monokai:{name:"Monokai",callback:function(){updateTheme("monokai")}},tomorrownight:{name:"Tomorrow Night",callback:function(){updateTheme("tomorrow_night")}},twilight:{name:"Twilight",callback:function(){updateTheme("twilight")}}}},"default":{name:"Default",callback:function(){updateTheme("chrome")}}}}},events:{show:function(opt){var $this=this;if($.contextMenu.getInputValues(opt,$this.data())){$.contextMenu.setInputValues(opt,$this.data())}},hide:function(opt){var $this=this;$.contextMenu.getInputValues(opt,$this.data())}}})})();$(".context-menu-list").on("click","input[name*='context-menu-input']",function(){var val=$(this).val();if(val){switch(val){case"plaincss":$("#cssLabel").text("CSS");cssField.getSession().setMode("ace/mode/css");use.Autoprefixer=false;use.Less=false;use.Sass=false;break;case"autoprefixer":$("#cssLabel").text("CSS");cssField.getSession().setMode("ace/mode/css");use.Autoprefixer=true;use.Less=false;use.Sass=false;break;case"less":$("#cssLabel").text("LESS");cssField.getSession().setMode("ace/mode/less");use.Less=true;use.Sass=false;use.Autoprefixer=false;break;case"sass":$("#cssLabel").text("SASS");cssField.getSession().setMode("ace/mode/sass");use.Sass=true;use.Less=false;use.Autoprefixer=false;break;case"none":use.Bootstrap=false;use.Foundation=false;break;case"bootstrap":use.Bootstrap=true;use.Foundation=false;break;case"foundation":use.Foundation=true;use.Bootstrap=false;break}}else{var checked=$(this).is(":checked");var item=event.target.name;switch(item){case"context-menu-input-modernizr":use.Modernizr=checked;break;case"context-menu-input-normalize":use.Normalize=checked;break}}});function updateTheme(theme){theme="ace/theme/"+theme;htmlField.setTheme(theme);cssField.setTheme(theme);jsField.setTheme(theme);localStorage.setItem("theme",theme)}window.onbeforeunload=function(e){sessionStorage.setItem("html",htmlField.getValue());sessionStorage.setItem("css",cssField.getValue());sessionStorage.setItem("js",jsField.getValue());sessionStorage.setItem("use",JSON.stringify(use));sessionStorage.setItem("cssMode",cssField.getSession().getMode().$id);e=e||window.event;var message="Your current session may be lost..";if(e){e.returnValue=message}return message}})();